(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,n,t){e.exports=t(87)},69:function(e,n,t){e.exports=t.p+"static/media/graphql_logo.126b901b.png"},87:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(29),i=t.n(o),c=t(2),l=t(20),s=t.n(l),u=t(23),p=t(10),d=t(11),m=t(13),g=t(12),h=t(14),f=t(98),b=t(9),v=t(18),j=t.n(v);function w(){var e=Object(c.a)(["\n  query LoggedInUserQuery {\n    loggedInUser {\n      id\n    }\n  }\n"]);return w=function(){return e},e}function O(){var e=Object(c.a)(["\n  mutation CreatePostMutation ($description: String!, $imageUrl: String!, $authorId: ID!) {\n    createPost(description: $description, imageUrl: $imageUrl, authorId: $authorId) {\n      id\n    }\n  }\n"]);return O=function(){return e},e}var E=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(r)))).state={description:"",imageUrl:""},t.handlePost=Object(u.a)(s.a.mark(function e(){var n,a,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.loggedInUserQuery.loggedInUser){e.next=3;break}return console.warn("only logged in users can create new posts"),e.abrupt("return");case 3:return n=t.state,a=n.description,r=n.imageUrl,o=t.props.loggedInUserQuery.loggedInUser.id,e.next=7,t.props.createPostMutation({variables:{description:a,imageUrl:r,authorId:o}});case 7:t.props.history.replace("/");case 8:case"end":return e.stop()}},e,this)})),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this;return this.props.loggedInUserQuery.loading?r.a.createElement("div",null,"Loading"):r.a.createElement("div",{className:"w-100 pa4 flex justify-center"},r.a.createElement("div",{style:{maxWidth:400},className:""},r.a.createElement("input",{className:"w-100 pa3 mv2",value:this.state.description,placeholder:"Description",onChange:function(n){return e.setState({description:n.target.value})}}),r.a.createElement("input",{className:"w-100 pa3 mv2",value:this.state.imageUrl,placeholder:"Image Url",onChange:function(n){return e.setState({imageUrl:n.target.value})}}),this.state.imageUrl&&r.a.createElement("img",{src:this.state.imageUrl,alt:"",className:"w-100 mv3"}),this.state.description&&this.state.imageUrl&&r.a.createElement("button",{className:"pa3 bg-black-10 bn dim ttu pointer",onClick:this.handlePost},"Post")))}}]),n}(r.a.Component),x=j()(O()),y=j()(w()),k=Object(b.compose)(Object(b.graphql)(x,{name:"createPostMutation"}),Object(b.graphql)(y,{name:"loggedInUserQuery",options:{fetchPolicy:"network-only"}}))(Object(f.a)(E)),U=t(34),I=t(4),C="#282c34",S="#2c313d",P="#efe3ff",$="#b7b7b7",_="#dddddd",L="0 2px 6px rgba(0,0,0,0.2)",M="0 2px 10px rgba(0,0,0,0.3)",q=".3s ease",A="15px",N="30px",Q="rgba(255,255,255,0.6)",T="rgba(255,255,255,1)",z="1200px";function B(){var e=Object(c.a)(["\n  border: none;\n  cursor: pointer;\n  padding: 10px 15px;\n  box-shadow: 0 0 0 rgba(0,0,0,0);\n  color: ",";\n  background: ",";\n  transition: ",";\n  \n  &:hover, &:focus {\n    box-shadow: ",";\n    color: ",";\n    background: ",";\n  }\n  \n  @media all and (max-width: 430px) {\n    flex-grow: 2;\n  }\n"]);return B=function(){return e},e}function D(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"]);return D=function(){return e},e}function J(){var e=Object(c.a)(["\n  padding: 10px;\n  font-size: .9em;\n  flex-grow: 1;\n  background: ",";\n  box-shadow: inset ",";\n  border: 1px solid ",";\n  \n  &:focus {\n    box-shadow: ",";\n  }\n"]);return J=function(){return e},e}function W(){var e=Object(c.a)(["\n  font-size: .9em;\n  min-width: 100px;\n  \n  @media all and (max-width: 430px) {\n    display: none;\n  }\n"]);return W=function(){return e},e}function F(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-bottom: ",";\n"]);return F=function(){return e},e}function G(){var e=Object(c.a)(["\n\n"]);return G=function(){return e},e}var H=I.a.form(G()),K=I.a.div(F(),A),R=I.a.div(W()),V=I.a.input(J(),P,L,C,M),X=I.a.div(D()),Y=I.a.button(B(),$,C,q,M,_,S);function Z(){var e=Object(c.a)(["\n  query LoggedInUserQuery {\n    loggedInUser {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}function ee(){var e=Object(c.a)(["\n  mutation AuthenticateUserMutation ($email: String!, $password: String!) { \n    authenticateUser(email: $email, password: $password) {\n      token\n    }\n  }\n"]);return ee=function(){return e},e}var ne=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(r)))).state={email:"",password:""},t.authenticateUser=Object(u.a)(s.a.mark(function e(){var n,a,r,o,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props,a=n.authenticateUserMutation,r=n.history,o=t.state,i=o.email,c=o.password,a({variables:{email:i,password:c}}).then(function(e){return r.replace("/"),localStorage.setItem("graphcoolToken",e.data.authenticateUser.token)});case 3:case"end":return e.stop()}},e,this)})),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(H,null,r.a.createElement(K,null,r.a.createElement(R,null,"Email:"),r.a.createElement(V,{value:this.state.email,placeholder:"Email address",onChange:function(n){return e.setState({email:n.target.value})}})),r.a.createElement(K,null,r.a.createElement(R,null,"Password:"),r.a.createElement(V,{type:"password",value:this.state.password,placeholder:"Password",onChange:function(n){return e.setState({password:n.target.value})}})),r.a.createElement(X,null,r.a.createElement(Y,{onClick:this.authenticateUser},"Log in")))}}]),n}(r.a.Component),te=j()(ee()),ae=j()(Z()),re=Object(b.compose)(Object(b.graphql)(te,{name:"authenticateUserMutation"}),Object(b.graphql)(ae,{name:"loggedInUserQuery",options:{fetchPolicy:"network-only"}}))(Object(f.a)(ne));function oe(){var e=Object(c.a)(["\n  padding: ",";\n"]);return oe=function(){return e},e}function ie(){var e=Object(c.a)(["\n  padding: 10px 15px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  background: ",";\n  color: ",";\n  transition: ",";\n  \n  svg {\n    margin-right: 5px;\n  }\n"]);return ie=function(){return e},e}function ce(){var e=Object(c.a)(["\n  border-radius: 0;\n  overflow: hidden;\n  //padding: 15px;\n  min-width: 400px;\n  min-height: 150px;\n  background: ",";\n  box-shadow: ",";\n  transition: ",";\n  border: 1px solid ",";\n  margin: "," ",";\n  \n  &:hover {\n    background: ",";\n    box-shadow: ",";\n  }\n  \n  @media all and (max-width: 430px) {\n    min-width: 90%;\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(c.a)(["\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n"]);return le=function(){return e},e}var se=I.a.div(le()),ue=I.a.div(ce(),Q,L,q,C,N,A,T,M),pe=I.a.div(ie(),C,$,q),de=I.a.div(oe(),A),me=t(21),ge=t.n(me),he=function(e){function n(){return Object(p.a)(this,n),Object(m.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement(se,null,r.a.createElement(ue,null,r.a.createElement(pe,null,r.a.createElement(ge.a,{top:!0,cascade:!0},r.a.createElement(U.a,null),"Login")),r.a.createElement(de,null,r.a.createElement(re,null))))}}]),n}(r.a.Component);function fe(){var e=Object(c.a)(["\n  mutation SignupUserMutation ($email: String!, $password: String!, $name: String) {\n    signupUser(email: $email, password: $password, name: $name) {\n      id\n      token\n    }\n  }\n"]);return fe=function(){return e},e}var be=function(e){function n(e){var t;return Object(p.a)(this,n),(t=Object(m.a)(this,Object(g.a)(n).call(this))).signupUser=Object(u.a)(s.a.mark(function e(){var n,a,r,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,a=n.email,r=n.password,o=n.name,e.prev=1,e.next=4,t.props.signupUserMutation({variables:{email:a,password:r,name:o}});case 4:i=e.sent,localStorage.setItem("graphcoolToken",i.data.signupUser.token),t.props.history.replace("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("An error occured: ",e.t0),t.props.history.replace("/");case 13:case"end":return e.stop()}},e,this,[[1,9]])})),t.state={email:"",password:"",name:""},t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(H,null,r.a.createElement(K,null,r.a.createElement(R,null,"Name:"),r.a.createElement(V,{value:this.state.name,placeholder:"name",onChange:function(n){return e.setState({name:n.target.value})}})),r.a.createElement(K,null,r.a.createElement(R,null,"Email:"),r.a.createElement(V,{value:this.state.email,placeholder:"Email address",onChange:function(n){return e.setState({email:n.target.value})}})),r.a.createElement(K,null,r.a.createElement(R,null,"Password:"),r.a.createElement(V,{type:"password",value:this.state.password,placeholder:"Password",onChange:function(n){return e.setState({password:n.target.value})}})),r.a.createElement(X,null,r.a.createElement(Y,{onClick:this.signupUser},"Sign Up")))}}]),n}(r.a.Component),ve=j()(fe()),je=Object(b.compose)(Object(b.graphql)(ve,{name:"signupUserMutation"}))(Object(f.a)(be)),we=function(e){function n(){return Object(p.a)(this,n),Object(m.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement(se,null,r.a.createElement(ue,null,r.a.createElement(pe,null,r.a.createElement(ge.a,{top:!0,cascade:!0},r.a.createElement(U.a,null),"Sign Up")),r.a.createElement(de,null,r.a.createElement(je,null))))}}]),n}(a.PureComponent),Oe=t(96),Ee=t(95),xe=t(43),ye=t(70),ke=t(5),Ue=t(97),Ie=(t(79),t(69)),Ce=t.n(Ie);function Se(){var e=Object(c.a)([" \n  \n  &:hover {\n    color: white;\n    background: rgba(255,255,255,0);\n  }\n"]);return Se=function(){return e},e}function Pe(){var e=Object(c.a)(["\n  border: none;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  background: transparent;\n  justify-content: space-around;\n  transition: .3s ease;\n  padding: 15px;\n  color: ",";\n  cursor: pointer;\n  \n  &:hover {\n    color: ",";\n    background: rgba(255,255,255,0.04);\n  }\n"]);return Pe=function(){return e},e}function $e(){var e=Object(c.a)(["\n  right: 0;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n"]);return $e=function(){return e},e}function _e(){var e=Object(c.a)(["\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 1.2em;\n  \n  img {\n    max-width: 30px;\n    margin-right: 10px;\n  }\n"]);return _e=function(){return e},e}function Le(){var e=Object(c.a)(["\n  max-width: ",";\n  margin: auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n"]);return Le=function(){return e},e}function Me(){var e=Object(c.a)(["\n  width: 100%;\n  padding: 0;\n  min-height: 60px;\n  background: ",";\n  color: ",";\n"]);return Me=function(){return e},e}var qe=I.a.div(Me(),C,$),Ae=I.a.div(Le(),z),Ne=I.a.div(_e()),Qe=I.a.div($e()),Te=I.a.button(Pe(),$,_),ze=Object(I.a)(Te)(Se()),Be=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(r)))).state={show:!1},t._handleClick=function(e){return function(){var n=t.props.history,a="logout"===e;a&&(localStorage.removeItem("graphcoolToken"),window.location.reload()),a||n.replace(e)}},t._onImageLoad=function(){t.setState({show:!0})},t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this.props,n=e.location,t=e.userId,a=this.state.show;return r.a.createElement(qe,null,r.a.createElement(Ae,null,r.a.createElement(ze,{onClick:this._handleClick("/")},r.a.createElement(Ne,null,r.a.createElement(ge.a,{cascade:!0,top:!0,when:a},r.a.createElement("img",{src:Ce.a,onLoad:this._onImageLoad}),"Social Media"))),r.a.createElement(Qe,null,!t&&"/signup"===n.pathname&&r.a.createElement(Te,{onClick:this._handleClick("/login")},"login"),!t&&"/login"===n.pathname&&r.a.createElement(Te,{onClick:this._handleClick("/signup")},r.a.createElement(ge.a,{cascade:!0,top:!0,when:a},"signup")),!t&&"/"===n.pathname&&r.a.createElement(Te,{onClick:this._handleClick("/signup")},r.a.createElement(ge.a,{cascade:!0,top:!0,when:a},"signup")),t&&r.a.createElement(Te,{onClick:this._handleClick("logout")},r.a.createElement(ge.a,{cascade:!0,top:!0,when:a},"logout")))))}}]),n}(r.a.Component),De=Object(f.a)(Be);function Je(){var e=Object(c.a)(["\n  query LoggedInUser {\n    loggedInUser {\n      id\n    }\n  }\n"]);return Je=function(){return e},e}var We=j()(Je());function Fe(){var e=Object(c.a)(["\n  max-width: 1200px;\n  margin: auto;\n"]);return Fe=function(){return e},e}function Ge(){var e=Object(c.a)(["\n  width: 100%;\n  min-height: calc(100vh - 60px);\n  position: relative;\n  background: #efe3ff;\n"]);return Ge=function(){return e},e}function He(){var e=Object(c.a)(["\n  font-family: 'Montserrat', sans-serif;\n"]);return He=function(){return e},e}var Ke=I.a.div(He()),Re=I.a.div(Ge()),Ve=I.a.div(Fe()),Xe=function(e){function n(){return Object(p.a)(this,n),Object(m.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.user;console.log("this.props",this.props);var a=null;return t.loggedInUser&&t.loggedInUser.id&&(a=t.loggedInUser.id),r.a.createElement(Ke,null,r.a.createElement(De,{userId:a}),r.a.createElement(Re,null,r.a.createElement(Ve,null,n)))}}]),n}(r.a.Component),Ye=Object(b.compose)(Object(b.graphql)(We,{name:"user",options:{fetchPolicy:"network-only"}}))(Xe),Ze=Object(ye.a)({uri:"https://api.graph.cool/simple/v1/cjowu0zrbb1270106hgdbk7vv"}),en=new ke.a(function(e,n){var t=localStorage.getItem("graphcoolToken"),a=t?"Bearer ".concat(t):null;return e.setContext({headers:{authorization:a}}),n(e)}).concat(Ze),nn=new xe.a({link:en,cache:(new Ue.a).restore(window.__APOLLO_STATE__)});i.a.render(r.a.createElement(b.ApolloProvider,{client:nn},r.a.createElement(Oe.a,null,r.a.createElement(Ye,null,r.a.createElement(Ee.a,{exact:!0,path:"/",component:he}),r.a.createElement(Ee.a,{path:"/create",component:k}),r.a.createElement(Ee.a,{path:"/login",component:he}),r.a.createElement(Ee.a,{path:"/signup",component:we})))),document.getElementById("root"))}},[[46,2,1]]]);
//# sourceMappingURL=main.ce53cc37.chunk.js.map